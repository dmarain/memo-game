<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MEMO’S Memory Mystery</title>
  <link rel="preload" href="memo-fox.png" as="image">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <!-- WELCOME -->
    <section id="welcome-screen" class="screen active" aria-labelledby="welcome-title">
      <h1 id="welcome-title">MEMO’S Detective Agency</h1>

      <div class="welcome-top">
        <img id="memoImage" src="memo-fox.png" alt="Memo the Fox" />
        <div class="welcome-actions">
          <button id="hearVoiceBtn" type="button">Hear Memo Speak</button>
          <button id="musicToggleBtn" type="button" aria-pressed="false">Music: OFF</button>
        </div>
      </div>

      <!-- Name + choices -->
      <form id="quickNameForm" class="quick-name" autocomplete="off">
        <label for="quickNameInput" id="welcomeInstructions">
          Type your name, then choose an option below.
        </label>
        <input id="quickNameInput" name="childName" type="text" maxlength="20" required autocomplete="name" autofocus />
        <div class="welcome-buttons">
          <button id="firstTimeBtn" type="button">First-Time User (Parent Settings)</button>
          <button id="returningBtn" type="button">Returning User</button>
          <button id="quickStartBtn" type="submit">Quick Start (Level 1A)</button>
        </div>
      </form>
    </section>

    <!-- PARENT SETTINGS (First-Time) -->
    <section id="parent-settings" class="screen" aria-labelledby="parent-title">
      <h2 id="parent-title">Parent Settings</h2>
      <form id="settingsForm" autocomplete="off">
        <label>Child Name
          <input id="childName" name="childName" type="text" maxlength="20" required />
        </label>
        <label>Start Level
          <select id="startLevel" name="startLevel">
            <option value="1A">Level 1A (1–3)</option>
            <option value="1B">Level 1B (1–3)</option>
            <option value="1C">Level 1C (1–3, shuffled)</option>
            <option value="2A">Level 2A (1–4)</option>
            <option value="2B">Level 2B (1–4)</option>
            <option value="2C">Level 2C (1–4, shuffled)</option>
            <option value="3A">Level 3A (1–5)</option>
            <option value="3B">Level 3B (1–5)</option>
            <option value="3C">Level 3C (1–5, shuffled)</option>
            <option value="4A">Level 4A (1–6)</option>
            <option value="4B">Level 4B (1–6)</option>
            <option value="4C">Level 4C (1–6, shuffled)</option>
          </select>
        </label>
        <fieldset>
          <legend>Options</legend>
          <label><input id="timerEnabled" type="checkbox" /> Enable Timer</label>
          <label>Timer Seconds
            <input id="timerSeconds" type="number" min="5" max="15" value="10" />
          </label>
          <label><input id="voiceOn" type="checkbox" checked /> Memo’s Voice On</label>
        </fieldset>
        <div class="settings-actions">
          <button id="saveSettingsBtn" type="submit">Save</button>
          <button id="startGameBtn" type="button">Start Game</button>
        </div>
      </form>
    </section>

    <!-- RETURNING USER -->
    <section id="returning-screen" class="screen" aria-labelledby="returning-title">
      <h2 id="returning-title">Returning User</h2>
      <form id="returningForm" class="returning-form" autocomplete="off">
        <label for="returnName">Your Name</label>
        <input id="returnName" type="text" maxlength="20" required />
        <div class="level-choices">
          <button id="resumeBtn" type="button">Resume Last Level</button>
          <div class="choose-level">
            <label for="chooseLevel">Choose Level</label>
            <select id="chooseLevel"></select>
            <button id="startChosenBtn" type="button">Start</button>
          </div>
        </div>
      </form>
    </section>

    <!-- GAME -->
    <section id="game-screen" class="screen" aria-live="polite" aria-labelledby="game-title">
      <div class="game-header">
        <h2 id="game-title">Find the Missing Number(s)</h2>
        <div class="labels">
          <span id="levelLabel">Level —</span>
          <span id="streakLabel">Streak: 0</span>
        </div>
        <button id="inGameMusicToggle" type="button" aria-pressed="false">Music: OFF</button>
      </div>

      <div id="instructionText" class="instruction"></div>
      <div id="numberDisplay" class="number-row" aria-label="Number row"></div>

      <div id="timerBar" class="timer hidden" role="status" aria-live="polite">
        <span id="timerCount">10</span>s
      </div>

      <form id="answerForm" autocomplete="off">
        <label for="answerInput" class="visually-hidden">Enter your answer</label>
        <!-- TEXT mode so spacebar is available on mobile -->
        <input id="answerInput" type="text" inputmode="text" placeholder="Type answers (space-separated)" />
        <button id="submitAnswerBtn" type="submit">Submit</button>
      </form>

      <div id="feedback" class="feedback" aria-live="polite"></div>

      <div class="game-footer">
        <button id="changeLevelBtn" type="button">Change Level</button>
        <button id="endGameBtn" type="button">End Game</button>
      </div>
    </section>

    <!-- CELEBRATION -->
    <section id="celebrationModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="celebrate-title">
      <div class="modal-content">
        <h3 id="celebrate-title">Congratulations — five in a row!</h3>
        <p id="celebrateText">You’re becoming a first-class detective!</p>
        <div class="modal-actions">
          <button id="stayLevelBtn" type="button">Stay on this level</button>
          <button id="nextLevelBtn" type="button">Go to next level</button>
          <button id="celebrationEndBtn" type="button">End game</button>
        </div>
      </div>
    </section>

    <!-- END -->
    <section id="end-screen" class="screen" aria-labelledby="end-title">
      <h2 id="end-title">Session Summary</h2>
      <div id="summaryStats"></div>
      <div class="end-actions">
        <button id="playAgainBtn" type="button">Play Again</button>
        <button id="exitToWelcomeBtn" type="button">Back to Welcome</button>
      </div>
    </section>
  </div>

  <script src="script.js"></script>
</body>
</html>
